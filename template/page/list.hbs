<style>
  .table-hover tbody tr:hover {
    background-color: #e0f2fe; /* light blue */
  }
</style>
<div class="bg-base-100 p-6 rounded-box shadow">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">{{class}}</h1>
    <form action="/page/list/{{class}}" method="GET">
      <div class="flex items-center gap-4">
        <div class="form-control">
          <input
            type="text"
            name="search"
            value="{{search}}"
            placeholder="Search secondary identifier"
            class="input input-bordered w-auto"
          />
        </div>
        <input type="hidden" name="sort" value="{{sort}}" />
        <button class="btn" type="submit">
          <i class="fas fa-search"></i>
          Search
        </button>
      </div>
    </form>
  </div>

  <div class="overflow-x-auto">
    <table class="table table-sm w-full table-hover table-zebra">
      <thead>
        <tr>
          <th>
            {{{htmxSortButton 
              (concat (concat '/page/list/' class) (concat '?search=' search)) 
              'page-list-content' 
              'flex items-center gap-2 cursor-pointer' 
              'Identifier' 
              'identifier' 
              sort 
            }}}
          </th>
          <th class="w-3/4">
            {{{htmxSortButton 
              (concat (concat '/page/list/' class) (concat '?search=' search)) 
              'page-list-content' 
              'flex items-center gap-2 cursor-pointer' 
              'Secondary Identifier' 
              'secondary_identifier' 
              sort 
            }}}
          </th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#unless pages}}
          <!-- align text to center -->
          <tr><td colspan=3 class="text-center">Nothing to list</td></tr>
        {{/unless}}
        {{#each pages}}
          <tr>
            <td>{{this.Identifier}}</td>
            <td><a
                href="/preview/{{this.Identifier}}"
                class="link"
              >{{this.SecondaryIdentifier}}</a></td>
            <td>
              <div class="flex items-center gap-4">
                <a
                  href="/page/edit/{{../class}}/{{this.Identifier}}"
                  title="Edit"
                ><i class="fas fa-edit text-info"></i></a>
                {{#if this.IsEnabled}}
                  <a
                    href="/page/disable/{{../class}}/{{this.Identifier}}"
                    title="Disable"
                  ><i class="fas fa-toggle-on text-success"></i></a>
                {{else}}
                  <a
                    href="/page/enable/{{../class}}/{{this.Identifier}}"
                    title="Enable"
                  ><i class="fas fa-toggle-off text-warning"></i></a>
                {{/if}}
                <a
                  href="/page/delete/{{../class}}/{{this.Identifier}}"
                  title="Delete"
                ><i class="fas fa-trash text-error"></i></a>
              </div>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

    <div class="mt-6 flex justify-between items-center">
      <div class="join">

        {{#with paging}}
          {{#if first}}
           <a hx-get="{{baseURL}}&page={{first}}" 
            hx-target="#page-list-content" 
            hx-swap="innerHTML" 
            class="join-item btn btn-sm">«</a>
          {{/if}}

          {{#each prev}}
           <a hx-get="{{baseURL}}&page={{this}}" 
            hx-target="#page-list-content" 
            hx-swap="innerHTML" 
            class="join-item btn btn-sm">{{this}}</a>
          {{/each}}

          <a class="join-item btn btn-sm btn-active">{{current}}</a>
        
          {{#each next}}
           <a hx-get="{{baseURL}}&page={{this}}" 
            hx-target="#page-list-content" 
            hx-swap="innerHTML" 
            class="join-item btn btn-sm">{{this}}</a>
          {{/each}}

          {{#if last}}
           <a hx-get="{{baseURL}}&page={{last}}" 
            hx-target="#page-list-content" 
            hx-swap="innerHTML" 
            class="join-item btn btn-sm">»</a>
          {{/if}}
      {{/with}}

      </div>
      <a href="/page/create/{{class}}" class="btn btn-success">
        <i class="fas fa-circle-plus"></i>
        Create new page
      </a>
    </div>
</div>
